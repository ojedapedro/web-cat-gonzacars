<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gonzacars - Catálogo de Repuestos</title>
    <link rel="stylesheet" href="styles/main.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <img src="assets/images/logo-gonzacars.png" alt="Gonzacars Logo" id="logo">
                <h1>Gonzacars - Catálogo de Repuestos</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#" id="nav-catalogo" class="active">Catálogo</a></li>
                    <li><a href="#" id="nav-pedidos">Mis Pedidos</a></li>
                    <li><button id="btn-carrito" class="btn-carrito">Carrito (<span id="contador-carrito">0</span>)</button></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- Sección Catálogo -->
        <section id="seccion-catalogo" class="active">
            <div class="seccion-header">
                <h2>Catálogo de Productos</h2>
                <div class="filtros">
                    <input type="text" id="buscar-producto" placeholder="Buscar producto...">
                    <select id="filtro-stock">
                        <option value="todos">Todos los productos</option>
                        <option value="disponible">En stock</option>
                        <option value="bajo-stock">Stock bajo</option>
                        <option value="sin-stock">Sin stock</option>
                    </select>
                </div>
            </div>
            
            <div class="productos-grid" id="lista-productos">
                <div class="cargando">Cargando productos...</div>
            </div>
        </section>

        <!-- Sección Pedidos -->
        <section id="seccion-pedidos">
            <div class="seccion-header">
                <h2>Historial de Pedidos</h2>
                <button id="btn-actualizar-pedidos" class="btn-secondary">Actualizar</button>
            </div>
            <div class="pedidos-lista" id="lista-pedidos">
                <div class="cargando">Cargando pedidos...</div>
            </div>
        </section>

        <!-- Modal para detalles del producto -->
        <div id="modal-producto" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 id="modal-titulo">Detalles del Producto</h2>
                <div class="producto-detalle">
                    <div class="detalle-info">
                        <p><strong>ID:</strong> <span id="modal-id"></span></p>
                        <p><strong>Descripción:</strong> <span id="modal-descripcion"></span></p>
                        <p><strong>Stock Inicial:</strong> <span id="modal-stock-inicial"></span></p>
                        <p><strong>Stock Actual:</strong> <span id="modal-stock"></span></p>
                        <p><strong>Costo:</strong> $<span id="modal-costo"></span></p>
                        <p><strong>Precio de venta:</strong> $<span id="modal-precio"></span></p>
                    </div>
                    <div class="detalle-pedido">
                        <label for="cantidad-pedido">Cantidad:</label>
                        <input type="number" id="cantidad-pedido" min="1" value="1">
                        <button id="btn-agregar-pedido" class="btn-primary">Agregar al Pedido</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Carrito de compras -->
        <div id="carrito" class="carrito">
            <div class="carrito-header">
                <h3>Pedido Actual</h3>
                <span id="carrito-cerrar">&times;</span>
            </div>
            <div class="carrito-body">
                <div id="carrito-vacio" class="carrito-vacio">
                    <p>El carrito está vacío</p>
                </div>
                <table id="tabla-carrito" style="display: none;">
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Cantidad</th>
                            <th>Precio</th>
                            <th>Total</th>
                            <th>Acción</th>
                        </tr>
                    </thead>
                    <tbody id="carrito-items">
                    </tbody>
                </table>
                <div class="carrito-total" id="carrito-total-container" style="display: none;">
                    <p>Total: $<span id="carrito-total">0.00</span></p>
                </div>
                <div class="carrito-acciones" id="carrito-acciones" style="display: none;">
                    <input type="text" id="nombre-vendedor" placeholder="Nombre del vendedor">
                    <button id="btn-generar-pdf" class="btn-primary" disabled>Generar PDF y Guardar</button>
                    <button id="btn-limpiar-carrito" class="btn-secondary">Limpiar Carrito</button>
                </div>
            </div>
        </div>

        <!-- Notificaciones -->
        <div id="notificaciones"></div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2023 Gonzacars - Repuestos Automotrices - Todos los derechos reservados</p>
        </div>
    </footer>

    <script src="scripts/app.js"></script>
    <script src="scripts/pdfGenerator.js"></script>
</body>
</html>